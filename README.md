# Extract FPL API & Visualize Player Data

## Overview

This repository contains scripts to extract data from the Fantasy Premier League (FPL) API and visualize player performance using **Expected Goal Involvement (xGI)**, **Actual Goals + Assists**, and **Over/Underperformance** metrics. The goal is to help FPL enthusiasts analyze key performance metrics to make informed decisions.

The project also includes custom watermark functionality to add branding to the visualizations.

## Features

- **Data Extraction**: Extract player data from the FPL API and save it into a CSV file.
- **xGI vs Actual Goals + Assists**: Compare expected goal involvement with actual player performance.
- **Over/Underperformance**: Visualize how players are performing relative to their expected stats.
- **Watermark Integration**: Easily add custom watermarks to your visualizations.
- **CSV Data Handling**: Process and analyze player data stored in CSV format.

## File Structure

- `extract.py`: Script to fetch data from the FPL API and save it into `fpl_players_gameweek_data.csv`.
- `fpl_players_gameweek_data.csv`: The extracted data in CSV format (if available).
- `visualise.py`: Script to visualize the extracted data, including xGI vs actual performance, and over/underperformance.

## Installation

1. Clone the repository:
    ```bash
    git clone https://github.com/paddykeoghgoode/Extract-FPL-API-Visualize.git
    ```

2. Navigate to the project directory:
    ```bash
    cd Extract-FPL-API-Visualize
    ```

3. (Optional) Create and activate a virtual environment:
    ```bash
    python3 -m venv venv
    source venv/bin/activate  # On Windows: venv\Scripts\activate
    ```

4. Install the dependencies:
    ```bash
    pip install -r requirements.txt
    ```

## Dependencies

- `matplotlib`: For creating plots and visualizations.
- `seaborn`: For enhanced statistical plots.
- `pandas`: For CSV data manipulation.
- `requests`: For making API calls to the FPL data endpoints.
- `numpy`: For numerical computations.

## Data Extraction

To extract player data from the FPL API:

1. Run the `extract.py` script:
    ```bash
    python extract.py
    ```

2. This script will fetch data from the FPL API, including detailed weekly stats for each player, and save it into the `fpl_players_gameweek_data.csv` file.

3. The main FPL API endpoints used are:
   - **bootstrap-static**: Provides static player and gameweek data.
     - URL: `https://fantasy.premierleague.com/api/bootstrap-static/`
   - **element-summary**: Provides weekly data for individual players.
     - URL: `https://fantasy.premierleague.com/api/element-summary/{player_id}/`

## Data Visualization

Once the data has been extracted and saved to the CSV file, you can visualize it using the `visualise.py` script.

To visualize the data:

1. Ensure the `fpl_players_gameweek_data.csv` file is available in the project directory.

2. Run the `visualise.py` script:
    ```bash
    python visualise.py
    ```

3. The script will generate the following visualizations:
   - **xGI vs Actual Goals + Assists**: Bar chart comparing expected vs actual player performance.
   - **Over/Underperformance**: Bar chart showing players exceeding or underperforming based on their xGI.
   - **Watermarked Visualizations**: Add a custom watermark image for branding.

## Example

Here is an example visualization generated by the script:

![Example Visualization](path-to-example-image.png)

## Customization

### Watermark

To include a custom watermark:
1. Download or choose the image you want as the watermark.
2. Update the script (`visualise.py`) with the correct path to the image:
    ```python
    img = mpimg.imread('/path/to/your/image.jpg')
    ```
3. Adjust the transparency (`alpha` value) as needed to ensure that the watermark does not obscure the data.

### Visualizations

You can modify:
- The number of players shown in the charts (e.g., top 5, top 10, etc.).
- The colors, fonts, and overall appearance of the graphs.
- The metrics displayed (xGI, actual goals, assists, etc.).

## Contribution

Contributions are welcome! Feel free to:
- Submit issues if you find bugs or have suggestions.
- Fork the repository and submit pull requests to improve the functionality.
- Add new data visualizations or expand the scope of analysis.

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.
